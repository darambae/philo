
# Philosophers

## 목차

- [소개](#소개)
- [기능](#기능)
- [사용법](#사용법)
- [중요 개념](#중요-개념)
- [표준 함수](#표준-함수)

---

## 소개

**철학자**는 에콜 42 프로젝트로, 고전적인 "식사하는 철학자" 문제를 통해 동시성, 멀티스레딩 및 동기화에 대해 학습합니다. 이 프로젝트는 철학자들이 테이블에 앉아 각각 식사, 생각, 수면을 번갈아 가며 수행하는 시뮬레이션을 요구하며, 공유 자원(포크)을 상호 배제(Mutex)를 통해 관리하여 데드락과 경쟁 상태를 피하도록 합니다.

---

## 기능

- 스레드와 뮤텍스를 사용하여 철학자 문제를 시뮬레이션합니다.
- 공유 자원에 대한 접근을 관리하는 동시성 제어를 보여줍니다.
- 각 철학자가 양 옆의 포크가 모두 사용 가능할 때만 식사할 수 있도록 보장합니다.
- 스레드 생성 및 동기화에 대한 오류 처리를 포함합니다.

---

## 사용법

### 기본 사용법

```bash
./철학자 철학자_수 생존_시간 식사_시간 수면_시간 [각_철학자_식사_횟수]
```

- `철학자_수`: 철학자 및 포크의 수.
- `생존_시간`: 철학자가 식사를 하지 않고 버틸 수 있는 시간(밀리초 단위).
- `식사_시간`: 철학자가 식사하는 데 걸리는 시간(밀리초 단위).
- `수면_시간`: 철학자가 잠을 자는 시간(밀리초 단위).
- `각_철학자_식사_횟수`(선택 사항): 시뮬레이션 종료 전 철학자가 식사해야 하는 횟수.

예시:

```bash
./철학자 5 800 200 200
```

이 명령은 다섯 명의 철학자를 시뮬레이션하며, 각 철학자는 생존 시간 800 ms, 식사 시간 200 ms, 수면 시간 200 ms의 제한이 있습니다.

---

## 중요 개념

### 스레드

스레드는 프로그램 내에서 여러 명령어 시퀀스를 동시에 실행할 수 있게 합니다. **철학자** 프로젝트에서 각 철학자는 개별 스레드로 나타나며, 이를 통해 각 철학자가 다른 철학자들과 독립적으로 생각하고, 먹고, 잠을 잘 수 있습니다.

- **pthread_create**: 새 스레드를 생성하여 지정된 함수를 병렬로 실행합니다.
- **pthread_join**: 특정 스레드가 종료될 때까지 대기하여, 모든 스레드가 완료되기 전 프로그램이 종료되지 않도록 합니다.

### 뮤텍스

뮤텍스(상호 배제)는 여러 스레드가 동시에 공유 자원에 접근하지 못하도록 막아 경쟁 상태를 방지합니다. 이 프로젝트에서 뮤텍스는 포크에 대한 접근을 제어하여 각 포크가 한 번에 하나의 철학자만 사용할 수 있도록 합니다.

- **pthread_mutex_init**: 뮤텍스를 초기화합니다.
- **pthread_mutex_lock**: 뮤텍스를 잠그어, 다른 스레드가 자원에 접근하지 못하게 합니다.
- **pthread_mutex_unlock**: 뮤텍스를 해제하여 다른 스레드가 자원에 접근할 수 있도록 합니다.
- **pthread_mutex_destroy**: 뮤텍스를 제거하여 자원을 해제합니다.

---

## 표준 함수

### `usleep`

- **사용법**: `usleep(마이크로초);`
- 스레드 실행을 지정된 마이크로초 동안 일시 정지시킵니다. 각 철학자가 식사, 수면 또는 생각에 소요하는 시간을 시뮬레이션하는 데 사용됩니다.

### `gettimeofday`

- **사용법**: `gettimeofday(&tv, NULL);`
- 현재 시간을 가져오며, 특정 상태(예: 식사 또는 수면)에 소요된 시간을 추적하고 철학자가 굶주림으로 사망할 위험이 있는지 확인하는 데 유용합니다.

### `pthread_create`

- **사용법**: `pthread_create(&thread, NULL, 함수, 인자);`
- 새 스레드를 생성하여 지정된 함수가 실행되도록 합니다. 각 철학자는 이 함수로 생성된 스레드로 나타납니다.

### `pthread_join`

- **사용법**: `pthread_join(thread, NULL);`
- 특정 스레드가 종료될 때까지 대기하여, 프로그램 종료 전 모든 스레드가 완료되도록 합니다.

### `pthread_mutex_init`

- **사용법**: `pthread_mutex_init(&mutex, NULL);`
- 공유 자원(포크)에 대한 접근을 제어하는 뮤텍스를 초기화하여 동시에 접근하지 못하게 합니다.

### `pthread_mutex_lock`

- **사용법**: `pthread_mutex_lock(&mutex);`
- 뮤텍스를 잠궈 다른 스레드가 자원에 접근하지 못하게 합니다.

### `pthread_mutex_unlock`

- **사용법**: `pthread_mutex_unlock(&mutex);`
- 뮤텍스를 해제하여 다른 스레드가 공유 자원에 접근할 수 있게 합니다.

### `pthread_mutex_destroy`

- **사용법**: `pthread_mutex_destroy(&mutex);`
- 뮤텍스를 제거하여 자원을 해제합니다.
